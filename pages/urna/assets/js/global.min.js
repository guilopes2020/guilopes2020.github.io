let clickSound=new Audio("assets/audio/click.mp3"),confirmaSound=new Audio("assets/audio/confirma.mp3"),confirmaFimSound=new Audio("assets/audio/confirmaFim.mp3"),botoes=document.querySelectorAll(".teclado ul"),desc=document.querySelector(".desc span"),cargo=document.querySelector(".cargo"),numeros=document.querySelector(".numeros ul"),info=document.querySelector(".info"),instrucoes=document.querySelector(".instrucoes"),fotos=document.querySelector(".display-dir"),etapaAtual=0,numero="",branco=!0;function montarTabelas(){let tabelas=document.querySelector(".lista-candidatos");tabelaHtml="";for(let i in etapas){tabelaHtml+="<table>",tabelaHtml+="<thead>",tabelaHtml+=`<tr><th colspan="3" class="cab-cargo">${etapas[i].titulo}</th></tr>`,tabelaHtml+="<tr><th>NÃºmero</th><th>Nome</th><th>Partido</th></tr>",tabelaHtml+="</thead>",tabelaHtml+="<tbody>";for(let j in etapas[i].candidatos)tabelaHtml+=`<tr><td>${etapas[i].candidatos[j].numero}</td><td>${etapas[i].candidatos[j].nome}</td><td>${etapas[i].candidatos[j].partido}</td></tr>`;tabelaHtml+="</tbody>",tabelaHtml+="</table>"}tabelas.innerHTML=tabelaHtml}function carregarEtapa(){branco=!1;let etapa=etapas[etapaAtual],numeroHtml="";for(let i=0;i<etapa.numeros;i++)numeroHtml+=0===i?'<li class="pisca"></li>':"<li></li>";desc.style.display="none",cargo.innerHTML=etapa.titulo,info.innerHTML="",instrucoes.style.display="none",fotos.innerHTML="",numeros.innerHTML=numeroHtml}function atualizarInterface(){let etapa,candidato=etapas[etapaAtual].candidatos.filter(item=>item.numero===parseInt(numero));if(candidato.length>0){let fotosHTML="";candidato=candidato[0],desc.style.display="block",instrucoes.style.display="block",info.innerHTML=`Nome: ${candidato.nome}<br>`,info.innerHTML+=`Partido: ${candidato.partido}<br>`,candidato.vice&&(info.innerHTML+=`${candidato.viceTitulo}: ${candidato.vice}<br>`);for(let i in candidato.fotos)fotosHTML+=`<div class="candidato${candidato.fotos[i].small?" small":""}">`,fotosHTML+=`<img src="assets/images/${candidato.fotos[i].url}" alt="candidato">`,fotosHTML+=`<span>${candidato.fotos[i].legenda}</span>`,fotosHTML+="</div>";fotos.innerHTML=fotosHTML}else desc.style.display="block",instrucoes.style.display="block",info.innerHTML='<div class="aviso-grande pisca">VOTO NULO</div>'}function inserirDigito(digito){let cursor=numeros.querySelector(".pisca");cursor&&(numero+=digito,cursor.innerHTML=digito,cursor.classList.remove("pisca"),cursor.nextElementSibling?cursor.nextElementSibling.classList.add("pisca"):atualizarInterface())}function anularVoto(){numero||(branco=!0,desc.style.display="block",instrucoes.style.display="block",numeros.innerHTML="",fotos.innerHTML="",info.innerHTML='<div class="aviso-grande pisca">VOTO EM BRANCO</div>')}function reiniciarCampo(){numero="",carregarEtapa()}function confirmarVoto(){let etapa=etapas[etapaAtual],confirmado=!1;branco?confirmado=!0:numero.length===etapa.numeros&&(confirmado=!0),confirmado&&(etapaAtual++,etapas[etapaAtual]?(confirmaSound.play(),numero="",carregarEtapa()):(confirmaFimSound.play(),document.querySelector(".tela").innerHTML='<div class="aviso-gigante">FIM</div>',setTimeout(()=>{location.reload()},5e3)))}botoes.forEach(item=>{item.querySelectorAll("li").forEach(el=>{el.addEventListener("click",e=>{switch(clickSound.currentTime=0,clickSound.play(),e.target.innerHTML){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":inserirDigito(e.target.innerHTML);break;case"BRANCO":anularVoto();break;case"CORRIGE":reiniciarCampo();break;case"CONFIRMA":confirmarVoto()}})})}),montarTabelas(),carregarEtapa();